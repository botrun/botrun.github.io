<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>neo4j-retrieval-benchmark - æ³¢ç‰¹äººæŠ€èƒ½</title>
  <link rel="stylesheet" href="../../assets/css/style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .skill-content {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem;
      background: var(--glass-bg);
      backdrop-filter: var(--blur);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      box-shadow: var(--shadow);
    }
    .skill-content h1 { margin-top: 2rem; margin-bottom: 1rem; }
    .skill-content h2 { margin-top: 1.5rem; margin-bottom: 0.75rem; color: var(--primary); }
    .skill-content h3 { margin-top: 1rem; margin-bottom: 0.5rem; color: var(--text-muted); }
    .skill-content code {
      background: rgba(124, 58, 237, 0.1);
      padding: 0.2em 0.4em;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }
    .skill-content pre {
      background: rgba(124, 58, 237, 0.05);
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1rem 0;
    }
    .skill-content pre code {
      background: none;
      padding: 0;
    }
  </style>
</head>
<body>
  <header>
    <nav><a href="../../"><i data-lucide="arrow-left"></i> è¿”å›é¦–é </a></nav>
  </header>
  <main>
    <div class="skill-content">
      <h1><i data-lucide="book-open"></i> neo4j-retrieval-benchmark</h1>
      <p style="color: var(--text-muted); font-size: 1.1rem; margin-bottom: 2rem;">
        |
      </p>
      <div>
        <p>
<h1>Neo4j æª¢ç´¢æ•ˆèƒ½å¯¦é©—æŠ€èƒ½</h1></p><p>> <strong>æ ¸å¿ƒç›®æ¨™</strong>ï¼šé‡åŒ–æ¯”è¼ƒ Neo4j åœ–å½¢è³‡æ–™åº«èˆ‡ rg (ripgrep) åœ¨ã€Œå¤šå¿«ã€å¤šçœã€å¤šæº–ã€ä¸‰å¤§é¢å‘çš„å·®ç•°</p><p>---</p><p><h2>ğŸ¯ å¯¦é©—ç›®æ¨™</h2></p><p><h3>ä¸‰å¤§è©•ä¼°é¢å‘</h3></p><p>| é¢å‘ | æŒ‡æ¨™ | æ¸¬é‡æ–¹æ³• |<br>
|------|------|----------|<br>
| <strong>å¤šå¿«</strong> | æŸ¥è©¢å›æ‡‰æ™‚é–“ (ms) | åŸ·è¡Œ 10 æ¬¡å–å¹³å‡å€¼ |<br>
| <strong>å¤šçœ</strong> | è¨˜æ†¶é«”ä½¿ç”¨é‡ (MB) | Docker stats / /usr/bin/time -v |<br>
| <strong>å¤šæº–</strong> | æº–ç¢ºåº¦ (%) | äººå·¥é©—è­‰ Top-10 çµæœç›¸é—œæ€§ |</p><p>---</p><p><h2>ğŸ“ å°ˆæ¡ˆçµæ§‹</h2></p><p><code>`</code><br>
å¯¦é©—/Neo4jæª¢ç´¢æ•ˆèƒ½å¯¦é©—-{æ—¥æœŸ}/<br>
â”œâ”€â”€ æ¸¬è©¦è³‡æ–™/<br>
â”‚   â””â”€â”€ PDFs/              # è‡ºç£æ”¿åºœ PDF æ–‡ä»¶<br>
â”œâ”€â”€ scripts/<br>
â”‚   â”œâ”€â”€ setup.ts           # ç’°å¢ƒè¨­å®šèˆ‡è³‡æ–™å°å…¥<br>
â”‚   â”œâ”€â”€ benchmark.ts       # æ•ˆèƒ½æ¸¬è©¦ä¸»ç¨‹å¼<br>
â”‚   â”œâ”€â”€ neo4j-query.ts     # Neo4j æŸ¥è©¢æ¨¡çµ„<br>
â”‚   â”œâ”€â”€ rg-query.ts        # ripgrep æŸ¥è©¢æ¨¡çµ„<br>
â”‚   â””â”€â”€ report-generator.ts # HTML å ±å‘Šç”Ÿæˆå™¨<br>
â”œâ”€â”€ docker/<br>
â”‚   â””â”€â”€ docker-compose.yml # Neo4j å®¹å™¨é…ç½®<br>
â””â”€â”€ çµæœå ±å‘Š/<br>
    â””â”€â”€ benchmark-{timestamp}.html<br>
<code>`</code></p><p>---</p><p><h2>ğŸ”§ ä½¿ç”¨æ–¹å¼</h2></p><p><h3>1. ç’°å¢ƒæº–å‚™</h3></p><p><code>`</code>bash<br>
<h1>å•Ÿå‹• Neo4j å®¹å™¨</h1><br>
cd å¯¦é©—/Neo4jæª¢ç´¢æ•ˆèƒ½å¯¦é©—-{æ—¥æœŸ}/docker<br>
docker-compose up -d</p><p><h1>å®‰è£ä¾è³´</h1><br>
npm install neo4j-driver pdf-parse<br>
<code>`</code></p><p><h3>2. è³‡æ–™å°å…¥</h3></p><p><code>`</code>bash<br>
<h1>å°‡ PDF è½‰æ›ç‚ºç´”æ–‡å­—ä¸¦å°å…¥ Neo4j</h1><br>
npx tsx scripts/setup.ts<br>
<code>`</code></p><p><h3>3. åŸ·è¡Œå¯¦é©—</h3></p><p><code>`</code>bash<br>
<h1>åŸ·è¡Œ Benchmark</h1><br>
npx tsx scripts/benchmark.ts \<br>
  --queries "æœ€ä½å·¥è³‡,æ•¸ä½ç™¼å±•,æ·¨é›¶æ’æ”¾" \<br>
  --iterations 10 \<br>
  --output çµæœå ±å‘Š/benchmark-$(TZ='Asia/Taipei' date "+%Y-%m-%dT%H%M").html<br>
<code>`</code></p><p><h3>4. æŸ¥çœ‹å ±å‘Š</h3></p><p><code>`</code>bash<br>
<h1>é–‹å•Ÿ HTML å ±å‘Š</h1><br>
open çµæœå ±å‘Š/benchmark-*.html<br>
<code>`</code></p><p>---</p><p><h2>ğŸ§ª å¯¦é©—è¨­è¨ˆ</h2></p><p><h3>æ¸¬è©¦æŸ¥è©¢é›†</h3></p><p>| é¡å‹ | æŸ¥è©¢è© | é æœŸçµæœ |<br>
|------|--------|----------|<br>
| <strong>å–®ä¸€é—œéµå­—</strong> | æœ€ä½å·¥è³‡ | æ”¿ç­–ç›¸é—œæ®µè½ |<br>
| <strong>å¤šé—œéµå­—</strong> | æ•¸ä½ ç™¼å±• | è·¨ä¸»é¡Œé—œè¯ |<br>
| <strong>èªç¾©æŸ¥è©¢</strong> | æ°¸çºŒèƒ½æºæ”¿ç­– | æ·¨é›¶è½‰å‹ç›¸é—œ |</p><p><h3>Neo4j è³‡æ–™æ¨¡å‹</h3></p><p><code>`</code>cypher<br>
// æ–‡ä»¶ç¯€é»<br>
(:Document {id, filename, source, date})</p><p>// æ®µè½ç¯€é»<br>
(:Paragraph {id, content, page, order})</p><p>// å¯¦é«”ç¯€é»<br>
(:Entity {name, type})  // äººåã€çµ„ç¹”ã€æ”¿ç­–åç¨±</p><p>// é—œä¿‚<br>
(:Document)-[:CONTAINS]->(:Paragraph)<br>
(:Paragraph)-[:MENTIONS]->(:Entity)<br>
(:Entity)-[:RELATED_TO]->(:Entity)<br>
<code>`</code></p><p><h3>ripgrep æŸ¥è©¢ç­–ç•¥</h3></p><p><code>`</code>bash<br>
<h1>åŸºæœ¬æŸ¥è©¢</h1><br>
rg -i "é—œéµå­—" æ¸¬è©¦è³‡æ–™/PDFs/*.txt</p><p><h1>ä¸Šä¸‹æ–‡æŸ¥è©¢</h1><br>
rg -i -C 3 "é—œéµå­—" æ¸¬è©¦è³‡æ–™/PDFs/*.txt</p><p><h1>å¤šé—œéµå­—çµ„åˆ</h1><br>
rg -i "é—œéµå­—1" æ¸¬è©¦è³‡æ–™/PDFs/*.txt | rg "é—œéµå­—2"<br>
<code>`</code></p><p>---</p><p><h2>ğŸ“Š æ•ˆèƒ½æŒ‡æ¨™</h2></p><p><h3>1. é€Ÿåº¦æ¸¬è©¦</h3></p><p><code>`</code>typescript<br>
interface SpeedMetrics {<br>
  query: string;<br>
  neo4j_avg_ms: number;<br>
  neo4j_std_dev: number;<br>
  rg_avg_ms: number;<br>
  rg_std_dev: number;<br>
  speedup_ratio: number;  // neo4j æ¯” rg å¿«å¤šå°‘å€<br>
}<br>
<code>`</code></p><p><h3>2. è¨˜æ†¶é«”æ¸¬è©¦</h3></p><p><code>`</code>typescript<br>
interface MemoryMetrics {<br>
  neo4j_memory_mb: number;<br>
  neo4j_peak_memory_mb: number;<br>
  rg_memory_mb: number;<br>
  rg_peak_memory_mb: number;<br>
}<br>
<code>`</code></p><p><h3>3. æº–ç¢ºåº¦æ¸¬è©¦</h3></p><p><code>`</code>typescript<br>
interface AccuracyMetrics {<br>
  query: string;<br>
  neo4j_top10: Array<{content: string, score: number}>;<br>
  rg_top10: Array<{content: string, line_number: number}>;<br>
  human_relevance_neo4j: number;  // 0-10 äººå·¥è©•åˆ†<br>
  human_relevance_rg: number;     // 0-10 äººå·¥è©•åˆ†<br>
}<br>
<code>`</code></p><p>---</p><p><h2>ğŸ”¬ é©—æ”¶æ¢ä»¶ï¼ˆBDDï¼‰</h2></p><p><h3>Givenï¼ˆå‰ç½®æ¢ä»¶ï¼‰</h3><br>
- âœ… Neo4j å®¹å™¨å·²å•Ÿå‹•ï¼ˆlocalhost:7687ï¼‰<br>
- âœ… è‡³å°‘ 2 ä»½è‡ºç£æ”¿åºœ PDF å·²è½‰æ›ç‚ºç´”æ–‡å­—<br>
- âœ… PDF å…§å®¹å·²å°å…¥ Neo4j åœ–å½¢è³‡æ–™åº«<br>
- âœ… æ¸¬è©¦æŸ¥è©¢é›†å·²å®šç¾©ï¼ˆè‡³å°‘ 5 å€‹æŸ¥è©¢ï¼‰</p><p><h3>Whenï¼ˆåŸ·è¡Œæ“ä½œï¼‰</h3><br>
- âœ… å°æ¯å€‹æŸ¥è©¢åˆ†åˆ¥åŸ·è¡Œ Neo4j æŸ¥è©¢ 10 æ¬¡<br>
- âœ… å°æ¯å€‹æŸ¥è©¢åˆ†åˆ¥åŸ·è¡Œ rg æŸ¥è©¢ 10 æ¬¡<br>
- âœ… è¨˜éŒ„æ¯æ¬¡æŸ¥è©¢çš„æ™‚é–“ã€è¨˜æ†¶é«”ã€çµæœæ•¸é‡</p><p><h3>Thenï¼ˆé æœŸçµæœï¼‰</h3><br>
- âœ… ç”ŸæˆåŒ…å«ä»¥ä¸‹å…§å®¹çš„ HTML å ±å‘Šï¼š<br>
  - é€Ÿåº¦æ¯”è¼ƒåœ–è¡¨ï¼ˆé•·æ¢åœ–ï¼‰<br>
  - è¨˜æ†¶é«”ä½¿ç”¨æ¯”è¼ƒåœ–è¡¨ï¼ˆæŠ˜ç·šåœ–ï¼‰<br>
  - æº–ç¢ºåº¦æ¯”è¼ƒè¡¨æ ¼<br>
  - çµè«–èˆ‡å»ºè­°<br>
- âœ… å ±å‘Šè‡ªå‹•éƒ¨ç½²åˆ° GitHub Pages<br>
- âœ… åŸå§‹æ•¸æ“šå„²å­˜ç‚º JSON ä¾›å¾ŒçºŒåˆ†æ</p><p>---</p><p><h2>ğŸ› ï¸ æŠ€è¡“å¯¦ä½œï¼ˆTDDï¼‰</h2></p><p><h3>æ¸¬è©¦é©…å‹•é–‹ç™¼æµç¨‹</h3></p><p><code>`</code>typescript<br>
// 1. å…ˆå¯«æ¸¬è©¦<br>
describe('Neo4j Query', () => {<br>
  it('should return results within 100ms', async () => {<br>
    const result = await neo4jQuery('æœ€ä½å·¥è³‡');<br>
    expect(result.duration_ms).toBeLessThan(100);<br>
  });</p><p>  it('should return at least 5 results', async () => {<br>
    const result = await neo4jQuery('æ•¸ä½ç™¼å±•');<br>
    expect(result.results.length).toBeGreaterThanOrEqual(5);<br>
  });<br>
});</p><p>// 2. å¯¦ä½œåŠŸèƒ½<br>
async function neo4jQuery(keyword: string): Promise<QueryResult> {<br>
  const session = driver.session();<br>
  const startTime = Date.now();</p><p>  const result = await session.run(<br>
    'MATCH (p:Paragraph)-[:CONTAINS_KEYWORD]->(k:Keyword {text: $keyword}) ' +<br>
    'RETURN p.content, p.page ORDER BY p.relevance DESC LIMIT 10',<br>
    { keyword }<br>
  );</p><p>  const duration_ms = Date.now() - startTime;<br>
  await session.close();</p><p>  return {<br>
    results: result.records.map(r => r.get('p.content')),<br>
    duration_ms<br>
  };<br>
}</p><p>// 3. åŸ·è¡Œæ¸¬è©¦ç¢ºèªé€šé<br>
<code>`</code></p><p>---</p><p><h2>ğŸ“¦ Docker é…ç½®</h2></p><p><h3>docker-compose.yml</h3></p><p><code>`</code>yaml<br>
version: '3.8'<br>
services:<br>
  neo4j:<br>
    image: neo4j:5.15.0<br>
    container_name: neo4j-benchmark<br>
    ports:<br>
      - "7474:7474"  # HTTP<br>
      - "7687:7687"  # Bolt<br>
    environment:<br>
      - NEO4J_AUTH=neo4j/benchmark123<br>
      - NEO4J_dbms_memory_heap_max__size=2G<br>
      - NEO4J_dbms_memory_pagecache_size=1G<br>
    volumes:<br>
      - neo4j_data:/data<br>
      - neo4j_logs:/logs<br>
    restart: unless-stopped</p><p>volumes:<br>
  neo4j_data:<br>
  neo4j_logs:<br>
<code>`</code></p><p>---</p><p><h2>ğŸ¨ å ±å‘Šè¦–è¦ºåŒ–</h2></p><p><h3>HTML å ±å‘Šå…ƒç´ </h3></p><p>1. <strong>åŸ·è¡Œæ‘˜è¦</strong><br>
   - å¯¦é©—æ—¥æœŸæ™‚é–“<br>
   - æ¸¬è©¦è³‡æ–™é›†ï¼ˆPDF æ¸…å–®ï¼‰<br>
   - ç¸½æŸ¥è©¢æ•¸é‡</p><p>2. <strong>é€Ÿåº¦æ¯”è¼ƒ</strong><br>
   - é•·æ¢åœ–ï¼šæ¯å€‹æŸ¥è©¢çš„ Neo4j vs rg å›æ‡‰æ™‚é–“<br>
   - è¡¨æ ¼ï¼šå¹³å‡å€¼ã€æ¨™æº–å·®ã€æœ€å¿«/æœ€æ…¢</p><p>3. <strong>è¨˜æ†¶é«”æ¯”è¼ƒ</strong><br>
   - æŠ˜ç·šåœ–ï¼šåŸ·è¡Œéç¨‹ä¸­çš„è¨˜æ†¶é«”ä½¿ç”¨<br>
   - è¡¨æ ¼ï¼šå¹³å‡è¨˜æ†¶é«”ã€å³°å€¼è¨˜æ†¶é«”</p><p>4. <strong>æº–ç¢ºåº¦è©•ä¼°</strong><br>
   - è¡¨æ ¼ï¼šTop-10 çµæœäººå·¥è©•åˆ†<br>
   - ç¯„ä¾‹çµæœå±•ç¤º</p><p>5. <strong>çµè«–èˆ‡å»ºè­°</strong><br>
   - å“ªç¨®å ´æ™¯é©åˆ Neo4j<br>
   - å“ªç¨®å ´æ™¯é©åˆ rg<br>
   - æ··åˆç­–ç•¥å»ºè­°</p><p>---</p><p><h2>ğŸ”— ç›¸é—œè³‡æº</h2></p><p><h3>å®˜æ–¹æ–‡ä»¶</h3><br>
- [Neo4j Driver for TypeScript](https://neo4j.com/docs/api/javascript-driver/current/)<br>
- [ripgrep User Guide](https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md)</p><p><h3>æŠ€èƒ½ä¾è³´</h3><br>
- <code>.claude/skills/æ°¸æ†çŸ¥å·±-æ–‡å­—è½‰æ›/</code> - PDF è½‰ç´”æ–‡å­—<br>
- <code>.claude/skills/æ°¸æ†çŸ¥å·±-ç¶²é ç™¼ä½ˆ/</code> - å ±å‘Šéƒ¨ç½²åˆ° GitHub Pages</p><p>---</p><p><h2>ğŸ“ å¼•è­‰ä¾†æº</h2></p><p>- <strong>Claude Code å®˜æ–¹æ–‡ä»¶</strong>ï¼š[Extend Claude with skills](https://code.claude.com/docs/en/skills)<br>
- <strong>Anthropic Skills Repository</strong>ï¼š[GitHub - anthropics/skills](https://github.com/anthropics/skills)<br>
- <strong>æ¸¬è©¦è³‡æ–™ä¾†æº</strong>ï¼š<br>
  - [2026å¹´é‡å¤§æ”¿ç­–åŠæƒ æ°‘æªæ–½](https://www.ey.gov.tw/File/11824F61AFFD5159?A=C) - è¡Œæ”¿é™¢<br>
  - [2025-2026åå‰å‰Šè¡Œå‹•è¨ˆç•«](https://www.immigration.gov.tw/media/110904/2025-2026%E5%8F%8D%E5%89%9D%E5%89%8A%E8%A1%8C%E5%8B%95%E8%A8%88%E7%95%AB-%E5%A5%89%E6%A0%B8%E7%89%88.pdf) - ç§»æ°‘ç½²</p><p>---</p><p><h2>ğŸ”„ è¿­ä»£æ”¹é€²</h2></p><p><h3>ç¬¬ä¸€ç‰ˆï¼ˆç•¶å‰ï¼‰</h3><br>
- âœ… åŸºæœ¬ Benchmark æ¡†æ¶<br>
- âœ… Neo4j vs rg å°ç…§æ¸¬è©¦<br>
- âœ… HTML å ±å‘Šç”Ÿæˆ</p><p><h3>æœªä¾†è¿­ä»£</h3><br>
- â³ åŠ å…¥å‘é‡æª¢ç´¢ï¼ˆEmbeddingï¼‰æ¯”è¼ƒ<br>
- â³ æ”¯æ´æ›´å¤šè³‡æ–™æ ¼å¼ï¼ˆWord, Excelï¼‰<br>
- â³ è‡ªå‹•åŒ– CI/CD å®šæœŸæ¸¬è©¦<br>
- â³ æ”¯æ´åˆ†æ•£å¼ Neo4j å¢é›†æ¸¬è©¦</p><p>---</p><p><h2>æª¢ç´¢é—œéµå­—</h2></p><p>Neo4j, åœ–å½¢è³‡æ–™åº«, æª¢ç´¢æ•ˆèƒ½, Benchmark, ripgrep, rg, è‡ºç£æ”¿åºœ, PDF, èªç¾©æª¢ç´¢, Cypher, TypeScript, Docker, æ•ˆèƒ½æ¸¬è©¦, è¨˜æ†¶é«”ä½¿ç”¨, æº–ç¢ºåº¦, BDD, TDD<br>
</p>
      </div>
    </div>
  </main>
  <footer>
    <p>Boosted by <a href="https://botrun.ai">botrun.ai</a></p>
  </footer>
  <script>lucide.createIcons();</script>
</body>
</html>